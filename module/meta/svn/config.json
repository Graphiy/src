{
  "meta": {
    "id": "meta.svn",
    "label": "CONF_MESSAGE[Subversion Repository]",
    "description": "CONF_MESSAGE[Extract SVN informations (revision, change log, etc) if the repository is a Working-Copy, and SVN is available as a commandline.]",
    "xmlns:xsi": "http://www.w3.org/2001/XMLSchema-instance",
    "xsi:noNamespaceSchemaLocation": "file:../core.app/ajxp_registry.xsd",
    "class_definition": {
      "filename": "plugins/meta.svn/class.SvnManager.php",
      "classname": "SvnManager"
    },
    "client_settings": {
      "icon": "plugins/access.mysql/resources/images/mysql_icon.png",
      "resources": {
        "i18n": {
          "namespace": "meta.svn",
          "path": "plugins/meta.svn/i18n"
        },
        "js": {
          "file": "plugins/meta.svn/class.SVNLogger.js",
          "className": "SVNLogger",
          "autoload": "true"
        },
        "img_library": {
          "alias": "svn_images",
          "path": "plugins/meta.svn/images"
        }
      }
    },
    "registry_contributions": {
      "hooks": [
        {
          "serverCallback": {
            "hookName": "version.commit_file",
            "methodName": "commitFile"
          }
        },
        {
          "serverCallback": {
            "hookName": "node.info",
            "methodName": "extractMeta"
          }
        }
      ],
      "client_configs": {
        "component_config": [
          {
            "className": "FilesList",
            "columns": {
              "additional_column": {
                "messageId": "243",
                "attributeName": "last_revision",
                "sortType": "String"
              }
            }
          },
          {
            "className": "InfoPanel",
            "infoPanelExtension": {
              "mime": "generic_file,generic_dir",
              "attributes": "last_revision,last_revision_author,last_revision_date",
              "messages": {
                "message": [
                  {
                    "key": "type_string",
                    "id": "134"
                  },
                  {
                    "key": "dim_string",
                    "id": "135"
                  },
                  {
                    "key": "header_string",
                    "id": "343"
                  }
                ]
              },
              "html": "<div style=\"\"><div class=\"panelHeader infoPanelGroup\" colspan=\"2\">Versioning</div><table class=\"infoPanelTable\" cellspacing=\"0\" border=\"0\" cellpadding=\"0\"><tr><td class=\"infoPanelLabel\">Last Revision</td><td class=\"infoPanelValue\">#{last_revision}</td></tr><tr class=\"even\"><td class=\"infoPanelLabel\">Revision Date</td><td class=\"infoPanelValue\">#{last_revision_date}</td></tr><tr class=\"even\"><td class=\"infoPanelLabel\">Revision Author</td><td class=\"infoPanelValue\">#{last_revision_author}</td></tr></table></div>"
            }
          }
        ]
      },
      "actions": {
        "action": [
          {
            "name": "svnlog",
            "gui": {
              "text": "meta.svn.2",
              "title": "meta.svn.21",
              "src": "svn_images/actions/ICON_SIZE/system_file_manager.png",
              "hasAccessKey": "false",
              "context": {
                "selection": "true",
                "dir": "false",
                "recycle": "false",
                "behaviour": "hidden",
                "actionBar": "false",
                "contextMenu": "true",
                "infoPanel": "false",
                "actionBarGroup": "change"
              },
              "selectionContext": {
                "dir": "true",
                "file": "true",
                "recycle": "true",
                "unique": "true",
                "behaviour": "hidden"
              }
            },
            "rightsContext": {
              "noUser": "true",
              "userLogged": "only",
              "read": "true",
              "write": "true",
              "adminOnly": ""
            },
            "processing": {
              "clientCallback": {
                "prepareModal": "true",
                "$t": "var loadFunc = function(oForm){app.actionBar.svnLogger = new SVNLogger($(oForm));app.actionBar.svnLogger.open();};var closeFunc = function(){app.actionBar.svnLogger.close();hideLightBox();return false;};modal.showDialogForm('SVN', 'svnlog_box', loadFunc, closeFunc, null, true, true);"
              },
              "clientForm": {
                "id": "svnlog_box",
                "$t": "<div id=\"svnlog_box\" action=\"svnlog\" box_width=\"450\" box_height=\"340\"></div>"
              },
              "serverCallback": {
                "methodName": "switchAction"
              }
            }
          },
          {
            "name": "svnlog2",
            "gui": {
              "text": "meta.svn.1",
              "title": "meta.svn.11",
              "src": "svn_images/actions/ICON_SIZE/system_file_manager.png",
              "hasAccessKey": "false",
              "context": {
                "selection": "false",
                "dir": "true",
                "recycle": "true",
                "actionBar": "true",
                "contextMenu": "false",
                "infoPanel": "false",
                "actionBarGroup": "put"
              }
            },
            "rightsContext": {
              "noUser": "true",
              "userLogged": "only",
              "read": "true",
              "write": "true",
              "adminOnly": ""
            },
            "processing": {
              "clientCallback": {
                "prepareModal": "true",
                "$t": "var loadFunc = function(oForm){app.actionBar.svnLogger = new SVNLogger($(oForm));app.actionBar.svnLogger.open(true);};var closeFunc = function(){app.actionBar.svnLogger.close();hideLightBox();return false;};modal.showDialogForm('SVN', 'svnlog_box', loadFunc, closeFunc, null, true, true);"
              }
            }
          },
          {
            "name": "svndownload",
            "processing": {
              "serverCallback": {
                "methodName": "switchAction"
              }
            }
          },
          {
            "name": "svnswitch",
            "processing": {
              "serverCallback": {
                "methodName": "switchAction"
              }
            }
          },
          {
            "name": "delete",
            "processing": {
              "serverCallback": {
                "methodName": "deleteSelection"
              }
            }
          },
          {
            "name": "restore",
            "processing": {
              "serverCallback": {
                "methodName": "deleteSelection"
              }
            }
          },
          {
            "name": "copy",
            "processing": {
              "serverCallback": {
                "methodName": "copyOrMoveSelection"
              }
            }
          },
          {
            "name": "move",
            "processing": {
              "serverCallback": {
                "methodName": "copyOrMoveSelection"
              }
            }
          },
          {
            "name": "rename",
            "processing": {
              "serverCallback": {
                "methodName": "copyOrMoveSelection"
              }
            }
          },
          {
            "name": "put_content",
            "post_processing": {
              "serverCallback": {
                "methodName": "commitChanges"
              }
            }
          },
          {
            "name": "mkdir",
            "post_processing": {
              "serverCallback": {
                "methodName": "addSelection"
              }
            }
          },
          {
            "name": "mkfile",
            "post_processing": {
              "serverCallback": {
                "methodName": "addSelection"
              }
            }
          },
          {
            "name": "upload",
            "post_processing": {
              "serverCallback": {
                "methodName": "addSelection"
              }
            }
          }
        ]
      }
    },
    "dependencies": {
      "pluginClass": {
        "pluginName": "access.fs|access.demo|access.remote_fs"
      }
    }
  }
}
